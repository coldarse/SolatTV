{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let TextComponent = class TextComponent {\n  constructor(route, scrollingtextService, appsettingService) {\n    this.route = route;\n    this.scrollingtextService = scrollingtextService;\n    this.appsettingService = appsettingService;\n    this.duration = 15;\n    this.text = '';\n    this.valueAscOrder = (a, b) => {\n      return a.value.localeCompare(b.value);\n    };\n    this.texts = [{\n      id: 0,\n      text: 'a',\n      order: 0,\n      edit: false,\n      isScrolling: false\n    }];\n  }\n  sortArr() {\n    this.texts.sort((a, b) => {\n      return a.order - b.order;\n    });\n  }\n  ngOnInit() {\n    this.scrollingtextService.getall_st('false').subscribe(data => {\n      this.texts = data;\n      this.sortArr();\n      this.appsettingService.get(1).subscribe(as_data => {\n        this.appsetting = as_data;\n        this.duration = as_data.textDuration;\n      });\n    });\n  }\n  editText(index) {\n    this.texts[index].edit = !this.texts[index].edit;\n    if (!this.texts[index].edit) {\n      this.scrollingtextService.update(this.texts[index], this.texts[index].id).subscribe(data => {\n        this.scrollingtextService.getall_st('false').subscribe(data => {\n          this.texts = data;\n          this.sortArr();\n        });\n      });\n    }\n  }\n  upSequence(index) {\n    const tempVal = this.texts[index];\n    const i = this.texts.indexOf(tempVal);\n    if (i > -1) {\n      this.texts.splice(index, 1);\n    }\n    const newIndex = index - 1;\n    this.texts.splice(newIndex, 0, tempVal);\n    this.updateSequence();\n  }\n  downSequence(index) {\n    const tempVal = this.texts[index];\n    const i = this.texts.indexOf(tempVal);\n    if (i > -1) {\n      this.texts.splice(index, 1);\n    }\n    const newIndex = index + 1;\n    this.texts.splice(newIndex, 0, tempVal);\n    this.updateSequence();\n  }\n  add_text() {\n    const temp = {\n      text: this.text,\n      order: this.texts.length,\n      edit: false,\n      isScrolling: false\n    };\n    this.scrollingtextService.create(temp).subscribe(data => {\n      this.scrollingtextService.getall_st('false').subscribe(data => {\n        this.texts = data;\n        this.sortArr();\n      });\n    });\n    this.text = '';\n  }\n  backToMenu() {\n    this.route.navigate(['menu']);\n  }\n  updateSequence() {\n    this.texts.forEach((elem, index) => {\n      elem.order = index;\n      this.scrollingtextService.update(elem, elem.id).subscribe(data => {\n        this.scrollingtextService.getall_st('false').subscribe(data => {\n          this.texts = data;\n          this.sortArr();\n        });\n      });\n    });\n  }\n  updateduration() {\n    this.appsetting.textDuration = this.duration;\n    this.appsettingService.update(this.appsetting, 1).subscribe(data => {});\n  }\n};\nTextComponent = __decorate([Component({\n  selector: 'app-text',\n  templateUrl: './text.component.html',\n  styleUrls: ['./text.component.css']\n})], TextComponent);","map":{"version":3,"names":["Component","TextComponent","constructor","route","scrollingtextService","appsettingService","duration","text","valueAscOrder","a","b","value","localeCompare","texts","id","order","edit","isScrolling","sortArr","sort","ngOnInit","getall_st","subscribe","data","get","as_data","appsetting","textDuration","editText","index","update","upSequence","tempVal","i","indexOf","splice","newIndex","updateSequence","downSequence","add_text","temp","length","create","backToMenu","navigate","forEach","elem","updateduration","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/danny/Documents/GitHub/SolatTV/src/app/text/text.component.ts"],"sourcesContent":["import { KeyValue } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AppSettingService } from 'src/shared/proxy/appsetting/appsetting.service';\nimport { ScrollingTextService } from 'src/shared/proxy/scrollingtext/scrollingtext.service';\n\n@Component({\n  selector: 'app-text',\n  templateUrl: './text.component.html',\n  styleUrls: ['./text.component.css']\n})\nexport class TextComponent implements OnInit {\n\n  duration = 15;\n\n  text = '';\n\n  appsetting: any;\n\n  constructor(\n    private route: Router,\n    private scrollingtextService: ScrollingTextService,\n    private appsettingService: AppSettingService,\n  ){}\n\n  valueAscOrder = (a: KeyValue<number,string>, b: KeyValue<number,string>): number => {\n    return a.value.localeCompare(b.value);\n  }\n\n  texts = [\n    {\n      id: 0,\n      text: 'a',\n      order: 0,\n      edit: false,\n      isScrolling: false,\n    },\n  ]\n\n  sortArr(){\n    this.texts.sort((a,b) => {\n      return a.order - b.order;\n    });\n  }\n\n  ngOnInit(): void {\n    this.scrollingtextService.getall_st('false').subscribe((data: any) => {\n      this.texts = data;\n\n      this.sortArr();\n\n      this.appsettingService.get(1).subscribe((as_data: any) => {\n        this.appsetting = as_data;\n        this.duration = as_data.textDuration;\n      });\n    });\n  }\n\n  editText(index: number){\n    this.texts[index].edit = !this.texts[index].edit;\n\n    if(!this.texts[index].edit){\n      this.scrollingtextService.update(this.texts[index], this.texts[index].id).subscribe((data: any) => {\n        this.scrollingtextService.getall_st('false').subscribe((data: any) => {\n          this.texts = data;\n\n          this.sortArr();\n        });\n      })\n    }\n  }\n\n  upSequence(index: number){\n    const tempVal = this.texts[index];\n    const i = this.texts.indexOf(tempVal);\n    if (i > -1) { \n      this.texts.splice(index, 1);\n    }\n    const newIndex = index - 1;\n    this.texts.splice(newIndex, 0, tempVal);\n\n    this.updateSequence();\n  }\n\n  downSequence(index: number){\n    const tempVal = this.texts[index];\n    const i = this.texts.indexOf(tempVal);\n    if (i > -1) { \n      this.texts.splice(index, 1);\n    }\n    const newIndex = index + 1;\n    this.texts.splice(newIndex, 0, tempVal);\n\n    this.updateSequence();\n  }\n\n  add_text(){\n\n    const temp = {\n      text: this.text,\n      order: this.texts.length,\n      edit: false,\n      isScrolling: false,\n    }\n\n    this.scrollingtextService.create(temp).subscribe((data: any) => {\n      this.scrollingtextService.getall_st('false').subscribe((data: any) => {\n        this.texts = data;\n\n        this.sortArr();\n      });\n    });\n\n    this.text = '';\n  }\n\n  backToMenu(){\n    this.route.navigate(['menu']);\n  }\n\n  updateSequence(){\n    this.texts.forEach((elem, index) => {\n      elem.order = index;\n      this.scrollingtextService.update(elem, elem.id).subscribe((data: any) => {\n        this.scrollingtextService.getall_st('false').subscribe((data: any) => {\n          this.texts = data;\n\n          this.sortArr();\n        });\n      })\n    })\n  }\n\n  updateduration(){\n    this.appsetting.textDuration = this.duration;\n\n    this.appsettingService.update(this.appsetting, 1).subscribe((data: any) => {\n    })\n  }\n\n}\n"],"mappings":";AACA,SAASA,SAAS,QAAgB,eAAe;AAU1C,WAAMC,aAAa,GAAnB,MAAMA,aAAa;EAQxBC,YACUC,KAAa,EACbC,oBAA0C,EAC1CC,iBAAoC;IAFpC,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,iBAAiB,GAAjBA,iBAAiB;IAT3B,KAAAC,QAAQ,GAAG,EAAE;IAEb,KAAAC,IAAI,GAAG,EAAE;IAUT,KAAAC,aAAa,GAAG,CAACC,CAA0B,EAAEC,CAA0B,KAAY;MACjF,OAAOD,CAAC,CAACE,KAAK,CAACC,aAAa,CAACF,CAAC,CAACC,KAAK,CAAC;IACvC,CAAC;IAED,KAAAE,KAAK,GAAG,CACN;MACEC,EAAE,EAAE,CAAC;MACLP,IAAI,EAAE,GAAG;MACTQ,KAAK,EAAE,CAAC;MACRC,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE;KACd,CACF;EAdC;EAgBFC,OAAOA,CAAA;IACL,IAAI,CAACL,KAAK,CAACM,IAAI,CAAC,CAACV,CAAC,EAACC,CAAC,KAAI;MACtB,OAAOD,CAAC,CAACM,KAAK,GAAGL,CAAC,CAACK,KAAK;IAC1B,CAAC,CAAC;EACJ;EAEAK,QAAQA,CAAA;IACN,IAAI,CAAChB,oBAAoB,CAACiB,SAAS,CAAC,OAAO,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;MACnE,IAAI,CAACV,KAAK,GAAGU,IAAI;MAEjB,IAAI,CAACL,OAAO,EAAE;MAEd,IAAI,CAACb,iBAAiB,CAACmB,GAAG,CAAC,CAAC,CAAC,CAACF,SAAS,CAAEG,OAAY,IAAI;QACvD,IAAI,CAACC,UAAU,GAAGD,OAAO;QACzB,IAAI,CAACnB,QAAQ,GAAGmB,OAAO,CAACE,YAAY;MACtC,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEAC,QAAQA,CAACC,KAAa;IACpB,IAAI,CAAChB,KAAK,CAACgB,KAAK,CAAC,CAACb,IAAI,GAAG,CAAC,IAAI,CAACH,KAAK,CAACgB,KAAK,CAAC,CAACb,IAAI;IAEhD,IAAG,CAAC,IAAI,CAACH,KAAK,CAACgB,KAAK,CAAC,CAACb,IAAI,EAAC;MACzB,IAAI,CAACZ,oBAAoB,CAAC0B,MAAM,CAAC,IAAI,CAACjB,KAAK,CAACgB,KAAK,CAAC,EAAE,IAAI,CAAChB,KAAK,CAACgB,KAAK,CAAC,CAACf,EAAE,CAAC,CAACQ,SAAS,CAAEC,IAAS,IAAI;QAChG,IAAI,CAACnB,oBAAoB,CAACiB,SAAS,CAAC,OAAO,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;UACnE,IAAI,CAACV,KAAK,GAAGU,IAAI;UAEjB,IAAI,CAACL,OAAO,EAAE;QAChB,CAAC,CAAC;MACJ,CAAC,CAAC;;EAEN;EAEAa,UAAUA,CAACF,KAAa;IACtB,MAAMG,OAAO,GAAG,IAAI,CAACnB,KAAK,CAACgB,KAAK,CAAC;IACjC,MAAMI,CAAC,GAAG,IAAI,CAACpB,KAAK,CAACqB,OAAO,CAACF,OAAO,CAAC;IACrC,IAAIC,CAAC,GAAG,CAAC,CAAC,EAAE;MACV,IAAI,CAACpB,KAAK,CAACsB,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;;IAE7B,MAAMO,QAAQ,GAAGP,KAAK,GAAG,CAAC;IAC1B,IAAI,CAAChB,KAAK,CAACsB,MAAM,CAACC,QAAQ,EAAE,CAAC,EAAEJ,OAAO,CAAC;IAEvC,IAAI,CAACK,cAAc,EAAE;EACvB;EAEAC,YAAYA,CAACT,KAAa;IACxB,MAAMG,OAAO,GAAG,IAAI,CAACnB,KAAK,CAACgB,KAAK,CAAC;IACjC,MAAMI,CAAC,GAAG,IAAI,CAACpB,KAAK,CAACqB,OAAO,CAACF,OAAO,CAAC;IACrC,IAAIC,CAAC,GAAG,CAAC,CAAC,EAAE;MACV,IAAI,CAACpB,KAAK,CAACsB,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;;IAE7B,MAAMO,QAAQ,GAAGP,KAAK,GAAG,CAAC;IAC1B,IAAI,CAAChB,KAAK,CAACsB,MAAM,CAACC,QAAQ,EAAE,CAAC,EAAEJ,OAAO,CAAC;IAEvC,IAAI,CAACK,cAAc,EAAE;EACvB;EAEAE,QAAQA,CAAA;IAEN,MAAMC,IAAI,GAAG;MACXjC,IAAI,EAAE,IAAI,CAACA,IAAI;MACfQ,KAAK,EAAE,IAAI,CAACF,KAAK,CAAC4B,MAAM;MACxBzB,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE;KACd;IAED,IAAI,CAACb,oBAAoB,CAACsC,MAAM,CAACF,IAAI,CAAC,CAAClB,SAAS,CAAEC,IAAS,IAAI;MAC7D,IAAI,CAACnB,oBAAoB,CAACiB,SAAS,CAAC,OAAO,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;QACnE,IAAI,CAACV,KAAK,GAAGU,IAAI;QAEjB,IAAI,CAACL,OAAO,EAAE;MAChB,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,IAAI,CAACX,IAAI,GAAG,EAAE;EAChB;EAEAoC,UAAUA,CAAA;IACR,IAAI,CAACxC,KAAK,CAACyC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;EAC/B;EAEAP,cAAcA,CAAA;IACZ,IAAI,CAACxB,KAAK,CAACgC,OAAO,CAAC,CAACC,IAAI,EAAEjB,KAAK,KAAI;MACjCiB,IAAI,CAAC/B,KAAK,GAAGc,KAAK;MAClB,IAAI,CAACzB,oBAAoB,CAAC0B,MAAM,CAACgB,IAAI,EAAEA,IAAI,CAAChC,EAAE,CAAC,CAACQ,SAAS,CAAEC,IAAS,IAAI;QACtE,IAAI,CAACnB,oBAAoB,CAACiB,SAAS,CAAC,OAAO,CAAC,CAACC,SAAS,CAAEC,IAAS,IAAI;UACnE,IAAI,CAACV,KAAK,GAAGU,IAAI;UAEjB,IAAI,CAACL,OAAO,EAAE;QAChB,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA6B,cAAcA,CAAA;IACZ,IAAI,CAACrB,UAAU,CAACC,YAAY,GAAG,IAAI,CAACrB,QAAQ;IAE5C,IAAI,CAACD,iBAAiB,CAACyB,MAAM,CAAC,IAAI,CAACJ,UAAU,EAAE,CAAC,CAAC,CAACJ,SAAS,CAAEC,IAAS,IAAI,CAC1E,CAAC,CAAC;EACJ;CAED;AAjIYtB,aAAa,GAAA+C,UAAA,EALzBhD,SAAS,CAAC;EACTiD,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,C,EACWlD,aAAa,CAiIzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}