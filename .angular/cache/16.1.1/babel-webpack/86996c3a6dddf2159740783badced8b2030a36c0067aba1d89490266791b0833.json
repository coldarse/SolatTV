{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewEncapsulation } from '@angular/core';\nimport { appFunc } from '../_models/appFunc';\nexport let DashboardComponent = class DashboardComponent {\n  constructor(elementRef, backgroundimageService, prayertimeService, appsettingService, scrollingtextService) {\n    this.elementRef = elementRef;\n    this.backgroundimageService = backgroundimageService;\n    this.prayertimeService = prayertimeService;\n    this.appsettingService = appsettingService;\n    this.scrollingtextService = scrollingtextService;\n    this.template = 1;\n    this.bgImg = '';\n    this.counter = 0;\n    this.img_duration = 15000;\n    this.isFullScreen = false;\n    this.isLoaded = false;\n    //Call API in this component\n    this.images = [{\n      id: 0,\n      file: 'bg1',\n      src: '../../assets/media/bg1.jpg',\n      order: 0,\n      edit: false\n    }];\n    this.periods = [{\n      period: 'Imsak',\n      time: '05:52',\n      order: 0\n    }, {\n      period: 'Subuh',\n      time: '07:07',\n      order: 1\n    }, {\n      period: 'Syuruk',\n      time: '12:20',\n      order: 2\n    }, {\n      period: 'Zohor',\n      time: '16:46',\n      order: 3\n    }, {\n      period: 'Asar',\n      time: '19:31',\n      order: 4\n    }, {\n      period: 'Maghrib',\n      time: '20:47',\n      order: 5\n    }, {\n      period: 'Isyak',\n      time: '02:25',\n      order: 6\n    }];\n  }\n  ngOnDestroy() {\n    clearInterval(this.img_interval);\n  }\n  ngOnInit() {\n    this.backgroundimageService.getall_bi('true').subscribe(bi_data => {\n      this.images = bi_data;\n      this.images = appFunc.sortArr(this.images);\n      this.imgCycle();\n      this.img_interval = setInterval(() => {\n        this.imgCycle();\n      }, this.img_duration);\n      this.prayertimeService.getall().subscribe(data => {\n        this.fullprayertime = data;\n        let date = new Date();\n        let DOM = date.getDate();\n        let MOY = date.getMonth() + 1;\n        let todaydatestring = MOY.toString().padStart(2, '0') + '-' + DOM.toString().padStart(2, '0');\n        let today_period = this.fullprayertime.find(element => element.date == todaydatestring);\n        this.periods = [];\n        this.periods.push({\n          period: 'Subuh',\n          time: today_period.fajr,\n          order: 1\n        });\n        this.periods.push({\n          period: 'Syuruk',\n          time: today_period.syuruq,\n          order: 2\n        });\n        this.periods.push({\n          period: 'Zohor',\n          time: today_period.dhuhr,\n          order: 3\n        });\n        this.periods.push({\n          period: 'Asar',\n          time: today_period.asr,\n          order: 4\n        });\n        this.periods.push({\n          period: 'Maghrib',\n          time: today_period.maghrib,\n          order: 5\n        });\n        this.periods.push({\n          period: 'Isyak',\n          time: today_period.isha,\n          order: 6\n        });\n        this.appsettingService.get(1).subscribe(data => {\n          this.appsetting = data;\n          this.template = this.appsetting.template;\n          this.img_duration = this.appsetting.backgroundDuration * 1000;\n          this.textDuration = this.appsetting.textDuration * 1000;\n          this.isLoaded = true;\n        });\n      });\n    });\n  }\n  imgCycle() {\n    this.bgImg = this.images[this.counter].file;\n    this.elementRef.nativeElement.ownerDocument.body.style.setProperty(\"background-image\", `url(../../assets/images/${this.bgImg}.jpg)`);\n    if (this.counter == this.images.length - 1) {\n      this.counter = -1;\n    }\n    this.counter++;\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css'],\n  encapsulation: ViewEncapsulation.None //Used to overwrite parent component css\n})], DashboardComponent);","map":{"version":3,"names":["Component","ViewEncapsulation","appFunc","DashboardComponent","constructor","elementRef","backgroundimageService","prayertimeService","appsettingService","scrollingtextService","template","bgImg","counter","img_duration","isFullScreen","isLoaded","images","id","file","src","order","edit","periods","period","time","ngOnDestroy","clearInterval","img_interval","ngOnInit","getall_bi","subscribe","bi_data","sortArr","imgCycle","setInterval","getall","data","fullprayertime","date","Date","DOM","getDate","MOY","getMonth","todaydatestring","toString","padStart","today_period","find","element","push","fajr","syuruq","dhuhr","asr","maghrib","isha","get","appsetting","backgroundDuration","textDuration","nativeElement","ownerDocument","body","style","setProperty","length","__decorate","selector","templateUrl","styleUrls","encapsulation","None"],"sources":["/Users/danny/Documents/GitHub/SolatTV/src/app/dashboard/dashboard.component.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewEncapsulation } from '@angular/core';\nimport { appFunc } from '../_models/appFunc';\nimport { BackgroundImageService } from 'src/shared/proxy/backgroundimage/backgroundimage.service';\nimport { PrayerTimeService } from 'src/shared/proxy/prayertime/prayertime.service';\nimport { AppSettingService } from 'src/shared/proxy/appsetting/appsetting.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css'],\n  encapsulation: ViewEncapsulation.None, //Used to overwrite parent component css\n})\nexport class DashboardComponent implements OnInit {\n\n  template = 1;\n\n  bgImg = '';\n\n  counter = 0;\n\n  img_duration = 15000;\n\n  isFullScreen = false;\n\n  img_interval: any;\n\n  appsetting: any;\n\n  textDuration: any;\n\n  isLoaded = false;\n\n  //Call API in this component\n  images = [\n    {\n      id: 0,\n      file:'bg1',\n      src: '../../assets/media/bg1.jpg',\n      order: 0,\n      edit:false\n    },\n  ];\n\n  fullprayertime: any;\n\n  periods = [\n    {\n      period: 'Imsak',\n      time: '05:52',\n      order: 0,\n    },\n    {\n      period: 'Subuh',\n      time: '07:07',\n      order: 1,\n    },\n    {\n      period: 'Syuruk',\n      time: '12:20',\n      order: 2,\n    },\n    {\n      period: 'Zohor',\n      time: '16:46',\n      order: 3,\n    },\n    {\n      period: 'Asar',\n      time: '19:31',\n      order: 4,\n    },\n    {\n      period: 'Maghrib',\n      time: '20:47',\n      order: 5,\n    },\n    {\n      period: 'Isyak',\n      time: '02:25',\n      order: 6,\n    },\n  ]\n\n\n  constructor(\n    private elementRef: ElementRef,\n    private backgroundimageService: BackgroundImageService,\n    private prayertimeService: PrayerTimeService,\n    private appsettingService: AppSettingService,\n    private scrollingtextService : ScrollingTextService,\n  ){}\n\n  ngOnDestroy(): void{\n    clearInterval(this.img_interval);\n  }\n\n  ngOnInit(): void {\n    this.backgroundimageService.getall_bi('true').subscribe((bi_data: any) => {\n      this.images = bi_data;\n\n      this.images = appFunc.sortArr(this.images);\n\n      this.imgCycle();\n      this.img_interval = setInterval(() => {\n        this.imgCycle()\n      }, this.img_duration);\n\n      this.prayertimeService.getall().subscribe((data: any) => {\n        this.fullprayertime = data;\n\n        let date = new Date()\n        let DOM = date.getDate();\n        let MOY = date.getMonth() + 1;\n\n        let todaydatestring = MOY.toString().padStart(2, '0') + '-' + DOM.toString().padStart(2, '0');\n\n        let today_period = this.fullprayertime.find((element: any) => element.date == todaydatestring);\n\n        this.periods = [];\n\n        this.periods.push({\n          period: 'Subuh',\n          time: today_period.fajr,\n          order: 1,\n        });\n\n        this.periods.push({\n          period: 'Syuruk',\n          time: today_period.syuruq,\n          order: 2,\n        });\n\n        this.periods.push({\n          period: 'Zohor',\n          time: today_period.dhuhr,\n          order: 3,\n        });\n\n        this.periods.push({\n          period: 'Asar',\n          time: today_period.asr,\n          order: 4,\n        });\n\n        this.periods.push({\n          period: 'Maghrib',\n          time: today_period.maghrib,\n          order: 5,\n        });\n\n        this.periods.push({\n          period: 'Isyak',\n          time: today_period.isha,\n          order: 6,\n        });\n\n        this.appsettingService.get(1).subscribe((data: any) => {\n          this.appsetting = data;\n\n          this.template = this.appsetting.template;\n          this.img_duration = this.appsetting.backgroundDuration * 1000;\n          this.textDuration = this.appsetting.textDuration * 1000;\n\n          this.isLoaded = true;\n        });\n      })\n    });\n  }\n\n  imgCycle(){\n    this.bgImg = this.images[this.counter].file;\n    this.elementRef.nativeElement.ownerDocument.body.style.setProperty(\"background-image\", `url(../../assets/images/${this.bgImg}.jpg)`);\n    if (this.counter == this.images.length - 1){\n      this.counter = -1;\n    }\n    this.counter++;\n  }\n\n  \n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}